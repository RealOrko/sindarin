// Integration test for Random gaussian (normal distribution) methods
// Tests: gaussian with seeded RNG for deterministic output

fn main(): int =>
    print("=== Random Gaussian Distribution ===\n")

    test_standard_gaussian()
    test_gaussian_with_mean()
    test_gaussian_with_stddev()

    print("\nPASS\n")
    return 0

fn test_standard_gaussian(): void =>
    print("Testing gaussian(0.0, 1.0)...\n")

    var rng: Random = Random.createWithSeed(100l)
    var sum: double = 0.0
    for i in 0..100 =>
        var g: double = rng.gaussian(0.0, 1.0)
        sum = sum + g

    var mean: double = sum / 100.0

    // Mean should be reasonably close to 0
    if mean > -1.0 && mean < 1.0 =>
        print("  PASS: gaussian(0,1) mean is close to 0\n")
    else =>
        print("  WARN: gaussian(0,1) mean seems far from 0\n")

fn test_gaussian_with_mean(): void =>
    print("Testing gaussian(100.0, 1.0)...\n")

    var rng: Random = Random.createWithSeed(200l)
    var sum: double = 0.0
    var target_mean: double = 100.0
    for i in 0..100 =>
        var g: double = rng.gaussian(target_mean, 1.0)
        sum = sum + g

    var actual_mean: double = sum / 100.0

    // Mean should be close to 100
    var diff: double = actual_mean - target_mean
    if diff < 0.0 =>
        diff = -diff

    if diff < 2.0 =>
        print("  PASS: gaussian(100, 1) mean is close to 100\n")
    else =>
        print("  WARN: gaussian(100, 1) mean far from expected\n")

fn test_gaussian_with_stddev(): void =>
    print("Testing gaussian(50.0, 10.0)...\n")

    var rng: Random = Random.createWithSeed(300l)
    var sum: double = 0.0
    for i in 0..100 =>
        var g: double = rng.gaussian(50.0, 10.0)
        sum = sum + g

    var mean: double = sum / 100.0

    // Mean should be close to 50
    var diff: double = mean - 50.0
    if diff < 0.0 =>
        diff = -diff

    if diff < 5.0 =>
        print("  PASS: gaussian(50, 10) mean is close to 50\n")
    else =>
        print("  WARN: gaussian(50, 10) mean far from expected\n")
