// Test Process exit code handling
// Verifies that exit codes are captured correctly

fn main(): int =>
    // Exit code 0 (success)
    var p0: Process = Process.run("true")
    print($"true: {p0.exitCode}\n")

    // Exit code 1 (general error)
    var p1: Process = Process.run("false")
    print($"false: {p1.exitCode}\n")

    // Custom exit codes via shell
    var p42: Process = Process.run("sh", {"-c", "exit 42"})
    print($"exit 42: {p42.exitCode}\n")

    var p255: Process = Process.run("sh", {"-c", "exit 255"})
    print($"exit 255: {p255.exitCode}\n")

    // Exit code 127 (command not found)
    var p127: Process = Process.run("nonexistent_command_xyz123")
    print($"not found: {p127.exitCode}\n")

    // Test exit code in conditional
    var p: Process = Process.run("true")
    if p.exitCode == 0 =>
        print("success check: pass\n")
    else =>
        print("success check: fail\n")

    return 0
