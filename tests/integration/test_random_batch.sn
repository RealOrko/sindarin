// Integration test for Random batch generation methods
// Tests: intMany, longMany, doubleMany, boolMany, gaussianMany
// Uses seeded RNG for deterministic output

fn main(): int =>
    print("=== Random Batch Generation ===\n")

    test_int_many()
    test_long_many()
    test_double_many()
    test_bool_many()
    test_gaussian_many()

    print("\nPASS\n")
    return 0

fn test_int_many(): void =>
    print("Testing intMany...\n")
    var rng: Random = Random.createWithSeed(100l)
    var arr: int[] = rng.intMany(1, 100, 10)

    // Check first 10 values are in range
    var check_count: int = 10
    if arr.length < check_count =>
        check_count = arr.length

    var all_valid: bool = true
    for i in 0..check_count =>
        var v: int = arr[i]
        if v < 1 || v > 100 =>
            all_valid = false

    if all_valid =>
        print("  PASS: intMany generates values in range\n")
    else =>
        print("  FAIL: intMany returned out-of-range values\n")

fn test_long_many(): void =>
    print("Testing longMany...\n")
    var rng: Random = Random.createWithSeed(200l)
    var arr: long[] = rng.longMany(1000000l, 9999999l, 5)

    var check_count: int = 5
    if arr.length < check_count =>
        check_count = arr.length

    var all_valid: bool = true
    for i in 0..check_count =>
        var v: long = arr[i]
        if v < 1000000l || v > 9999999l =>
            all_valid = false

    if all_valid =>
        print("  PASS: longMany generates values in range\n")
    else =>
        print("  FAIL: longMany returned out-of-range values\n")

fn test_double_many(): void =>
    print("Testing doubleMany...\n")
    var rng: Random = Random.createWithSeed(300l)
    var arr: double[] = rng.doubleMany(0.0, 1.0, 20)

    var check_count: int = 20
    if arr.length < check_count =>
        check_count = arr.length

    var all_valid: bool = true
    for i in 0..check_count =>
        var v: double = arr[i]
        if v < 0.0 || v >= 1.0 =>
            all_valid = false

    if all_valid =>
        print("  PASS: doubleMany generates values in range\n")
    else =>
        print("  FAIL: doubleMany returned out-of-range values\n")

fn test_bool_many(): void =>
    print("Testing boolMany...\n")
    var rng: Random = Random.createWithSeed(400l)
    var arr: bool[] = rng.boolMany(50)

    var check_count: int = 50
    if arr.length < check_count =>
        check_count = arr.length

    var true_count: int = 0
    var false_count: int = 0
    for i in 0..check_count =>
        var b: bool = arr[i]
        if b =>
            true_count = true_count + 1
        else =>
            false_count = false_count + 1

    print("  PASS: boolMany invoked successfully\n")

fn test_gaussian_many(): void =>
    print("Testing gaussianMany...\n")
    var rng: Random = Random.createWithSeed(500l)
    var arr: double[] = rng.gaussianMany(0.0, 1.0, 100)

    print("  PASS: gaussianMany invoked successfully\n")
