// Integration test for Random static method usage
// Tests: Random.int, Random.long, Random.double, Random.bool, Random.byte
// Uses seeded RNG for deterministic output

fn main(): int =>
    print("=== Random Basic Static Methods ===\n")

    test_int_range()
    test_long_range()
    test_double_range()
    test_bool_distribution()
    test_byte()

    print("\nPASS\n")
    return 0

fn test_int_range(): void =>
    print("Testing Random.int...\n")
    var rng: Random = Random.createWithSeed(100l)
    var all_valid: bool = true
    for i in 0..20 =>
        var value: int = rng.int(1, 10)
        var in_range: bool = (value >= 1) && (value <= 10)
        if !in_range =>
            all_valid = false
            print($"ERROR: int returned {value}\n")

    if all_valid =>
        print("  PASS: int(1, 10) always in range\n")
    else =>
        print("  FAIL: int returned out-of-range values\n")

fn test_long_range(): void =>
    print("Testing Random.long...\n")
    var rng: Random = Random.createWithSeed(200l)
    var all_valid: bool = true
    for i in 0..20 =>
        var value: long = rng.long(1000000l, 9999999l)
        var in_range: bool = (value >= 1000000l) && (value <= 9999999l)
        if !in_range =>
            all_valid = false
            print($"ERROR: long returned {value}\n")

    if all_valid =>
        print("  PASS: long always in range\n")
    else =>
        print("  FAIL: long returned out-of-range values\n")

fn test_double_range(): void =>
    print("Testing Random.double...\n")
    var rng: Random = Random.createWithSeed(300l)
    var all_valid: bool = true
    for i in 0..20 =>
        var value: double = rng.double(0.0, 1.0)
        var in_range: bool = (value >= 0.0) && (value < 1.0)
        if !in_range =>
            all_valid = false
            print($"ERROR: double returned {value}\n")

    if all_valid =>
        print("  PASS: double(0.0, 1.0) always in range\n")
    else =>
        print("  FAIL: double returned out-of-range values\n")

fn test_bool_distribution(): void =>
    print("Testing Random.bool...\n")
    var rng: Random = Random.createWithSeed(400l)
    var true_count: int = 0
    var false_count: int = 0
    for i in 0..100 =>
        var result: bool = rng.bool()
        if result =>
            true_count = true_count + 1
        else =>
            false_count = false_count + 1

    // With seed 400, we expect ~50/50 distribution
    if true_count > 0 && false_count > 0 =>
        print("  PASS: bool() returned both true and false\n")
    else =>
        print("  FAIL: bool() only returned one value\n")

fn test_byte(): void =>
    print("Testing Random.byte...\n")
    var rng: Random = Random.createWithSeed(500l)
    for i in 0..20 =>
        var b: byte = rng.byte()

    print("  PASS: byte() returns valid byte values\n")
