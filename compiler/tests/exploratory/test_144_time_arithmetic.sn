// Test Time arithmetic operations

fn main(): int =>
    // Create base time: Dec 29, 2024, 19:20:00
    var t: Time = Time.fromSeconds(1735500000)

    print("Testing add() core method...\n")
    print("============================\n\n")

    // Test add milliseconds (positive)
    var t1: Time = t.add(5000)
    var diff1: int = t1.diff(t)
    print($"  add(5000): diff={diff1}ms (expected 5000)\n")

    // Test add milliseconds (negative)
    var t2: Time = t.add(-3000)
    print($"  add(-3000): diff={t2.diff(t)}ms (expected -3000)\n")

    // Test add zero (no change)
    var t3: Time = t.add(0)
    print($"  add(0): diff={t3.diff(t)}ms (expected 0)\n")

    print("\nadd() core method - PASS\n")

    // Test small time units
    print("\nTesting small time units...\n")
    print("===========================\n\n")

    // Test addSeconds (positive)
    var ts: Time = t.addSeconds(30)
    print($"  addSeconds(30): diff={ts.diff(t)}ms (expected 30000)\n")

    // Test addMinutes (positive)
    var tm: Time = t.addMinutes(5)
    print($"  addMinutes(5): diff={tm.diff(t)}ms (expected 300000)\n")

    // Test addSeconds (negative)
    var tsn: Time = t.addSeconds(-10)
    print($"  addSeconds(-10): diff={tsn.diff(t)}ms (expected -10000)\n")

    // Test addMinutes (negative)
    var tmn: Time = t.addMinutes(-2)
    print($"  addMinutes(-2): diff={tmn.diff(t)}ms (expected -120000)\n")

    print("\nSmall time units - PASS\n")

    // Test large time units
    print("\nTesting large time units...\n")
    print("===========================\n\n")

    // Test addHours (positive)
    var th: Time = t.addHours(2)
    print($"  addHours(2): diff={th.diff(t)}ms (expected 7200000)\n")

    // Test addDays (positive)
    var td: Time = t.addDays(1)
    print($"  addDays(1): diff={td.diff(t)}ms (expected 86400000)\n")

    // Test addHours (negative)
    var thn: Time = t.addHours(-3)
    print($"  addHours(-3): diff={thn.diff(t)}ms (expected -10800000)\n")

    // Test addDays (negative)
    var tdn: Time = t.addDays(-1)
    print($"  addDays(-1): diff={tdn.diff(t)}ms (expected -86400000)\n")

    print("\nLarge time units - PASS\n")

    // Test operation chaining
    print("\nTesting operation chaining...\n")
    print("=============================\n\n")

    // Test simple chain: 2 hours + 30 minutes = 9000 seconds = 9000000ms
    var tc: Time = t.addHours(2).addMinutes(30)
    print($"  addHours(2).addMinutes(30): diff={tc.diff(t)}ms (expected 9000000)\n")

    // Test complex chain: 1 day - 2 hours = 86400000 - 7200000 = 79200000ms
    var tc2: Time = t.addDays(1).addHours(-2)
    print($"  addDays(1).addHours(-2): diff={tc2.diff(t)}ms (expected 79200000)\n")

    // Test longer chain
    var tc3: Time = t.addDays(1).addHours(2).addMinutes(30).addSeconds(15)
    print($"  +1d +2h +30m +15s: diff={tc3.diff(t)}ms\n")

    print("\nOperation chaining - PASS\n")

    // Test diff() for time measurement
    print("\nTesting diff() for time measurement...\n")
    print("======================================\n\n")

    // Demonstrate diff with known values
    var start: Time = Time.now()
    var end: Time = start.addSeconds(5)
    print($"  5 second difference: {end.diff(start)}ms (expected 5000)\n")

    // Test symmetric diff
    print($"  Reverse diff: {start.diff(end)}ms (expected -5000)\n")

    print("\ndiff() measurement - PASS\n")

    print("\n=============================\n")
    print("All arithmetic tests complete - PASS\n")

    return 0
